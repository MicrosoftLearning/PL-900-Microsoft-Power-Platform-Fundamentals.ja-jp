---
lab:
  title: 'ラボ 1:データ モデリング'
  module: 'Module 2: Introduction to Microsoft Dataverse'
---

# ラボ 1:データ モデリング

**WWL テナント - 使用条件** 講師による指導付きトレーニング配信の一環としてテナントを提供されている場合、テナントは講師による指導付きトレーニングでハンズオン ラボをサポートする目的で利用できます。 テナントを共有したり、ハンズオン ラボ以外の目的で使用したりしないでください。 このコースで使われるテナントは試用版テナントであり、クラスが終了し、拡張機能の対象となっていない場合は、使用したりアクセスしたりすることはできません。 テナントを有料サブスクリプションに変換することはできません。 このコースの一環として取得したテナントは Microsoft Corporation の財産のままであり、当社はいつでもアクセス権とリポジトリを取得する権利を留保します。 

## シナリオ

ベローズ カレッジは、キャンパス内に複数の建物を持つ教育機関です。 キャンパス訪問は現在、紙の記録簿に記録されています。 その情報は一貫して把握されておらず、キャンパス全体の訪問に関するデータを収集して分析する手段もありません。

キャンパスの管理者は、建物へのアクセスがセキュリティ担当者によって管理され、すべての訪問者がホストによって事前に登録され、記録されることが要求される訪問者登録システムを近代化したいと考えています。

このコース全体を通して、アプリケーションを構築するとともに自動化を行って、ベローズ カレッジの管理担当者とセキュリティ担当者がキャンパス内の建物へのアクセスを管理および制御できるようにします。

このラボでは、次の要件をサポートするデータ モデルを作成します。

- R1 – スケジュールされたキャンパス訪問の情報を追跡する。

- R2 – 訪問者を識別し、追跡するための基本情報を記録する。

- R3 – 訪問をスケジュール、記録、および管理する。

最後に、サンプル データを Microsoft Dataverse にインポートします。

ラボ手順の概要

学習環境を準備するには、次の手順を実行します。

- メタデータの説明 (テーブルおよびリレーションシップ) については、[データ モデルのドキュメント](https://github.com/MicrosoftLearning/PL-900-Microsoft-Power-Platform-Fundamentals/blob/master/Allfiles/Campus%20Management.png)を参照してください。 Ctrl キーを押しながら左クリックするか、リンクを右クリックして、データ モデル ドキュメントを新しいウィンドウで開くことができます。
- 訪問テーブルを作成します
- Excel スプレッドシートを使用して訪問データをインポートする


## 前提条件

- **モジュール 1 ラボ 0 - ラボ環境の検証**の完了

始める前に考慮すべきこと

- 名前付け規則 - 名前は、十分注意して入力してください。


# 演習 1:新しいテーブルを作成する

**目的:** このテーブルでは、新しいカスタム テーブル "訪問" を作成します。

## タスク #1: 訪問テーブルと列を作成する

**訪問**テーブルには、訪問者、スケジュールされた時間、各訪問の実際の時間などのキャンパス訪問に関する情報が含まれます。

訪問チェックイン プロセス中に尋ねられたときに、訪問者が簡単に入力して解釈できる一意の番号を毎回ごとの訪問に割り当てたいと思います。

1.  まだサインインしていない場合は、`https://make.powerapps.com` にサインインします

1.  右上の **[環境]** メニューで、**Dev One** 環境が選択されていることを確認します。 

1.  左側のナビゲーションを使って、**[テーブル]** を選択します。

1.  **[+ 新しいテーブル]** を選択し、 **[詳細プロパティの設定]** を選択します。 

1.  **[表示名]** に、`Visit` を入力します

1.  **[保存]** を選択します。 

1.  **[スキーマ]** セクションで、 **[列]** を選択します。 


## 「開始予定」列を作成します

1.  **[+ 新しい列]** を選択します。 

1.  **[表示名]** に `Scheduled Start` を入力します。 

1.  **[データの種類]** で **[日付と時刻]** を選択します。 

1.  **[必須]** を **[Business required] (業務上必須)** に変更します。 

1.  **[詳細オプション]** を展開します。 

1.  **[タイム ゾーンの調整]** で、 **[タイム ゾーン非依存]** を選択します。 

    > **注:** 訪問の時刻は常に建物の場所に対してローカルであり、異なるタイム ゾーンから表示しても変更してはならないため、 **[タイム ゾーン非依存]** 動作を使用して、日付と時刻の情報を記録します。 

1.  **[保存]** を選択します。 


## [終了予定] 列を作成します

1.  **[+ 新しい列]** を選択します。 

1.  **[表示名]** に `Scheduled End` を入力します。

1.  **[データの種類]** で **[日付と時刻]** を選択します。

1.  **必須**フィールドで、 **[必須のビジネス]** を選択します。

1.  **[詳細オプション]** を展開します。

1.  **[タイム ゾーンの調整]** で、 **[タイム ゾーン非依存]** を選択します。

1.  **[保存]** を選択します。 


## [実際の開始] 列を作成します

1.  **[+ 新しい列]** を選択します。 

1.  **[表示名]** に `Actual Start` を入力します。

1.  **[データの種類]** で **[日付と時刻]** を選択します。

1.  **必須**フィールドで、これを **[任意]** のままにします。

1.  **[詳細オプション]** を展開します。

1.  **[タイム ゾーンの調整]** で、 **[タイム ゾーン非依存]** を選択します。 

1.  **[保存]** を選択します。 


## [実際の終了] 列を作成します

1.  **[+ 新しい列]** を選択します。

1.  **[表示名]** に `Actual End` を入力します。

1.  **[データの種類]** で **[日付と時刻]** を選択します。

1.  **必須**フィールドで、これを **[任意]** のままにします。

1.  **[詳細オプション]** を展開します。

1.  **[タイム ゾーンの調整]** で、 **[タイム ゾーン非依存]** を選択します。

1.  **[保存]** を選択します。


## [コード] 列を作成します

1.  **[+ 新しい列]** を選択します。

1.  **[表示名]** に `Code` を入力します。

1.  **[データの種類]** で **[オートナンバー]** を選択します。

1.  **[オートナンバー型]** に **[日付が先頭に付加される数]** を選択します。

1.  **[保存]** を選択します。 


## 訪問者の検索列を作成します

1.  **[+ 新しい列]** を選択します。

1.  **[表示名]** に `Visitor` を入力します。

1.  **[検索]**  >  **[データの種類]** で **[検索]** の順に選択します。 

1.  **[関連テーブル]** で **[連絡先]** を選択します。 

1.  **[詳細オプション]** を展開します。 

1.  **[リレーションシップ名]** に「`visitor_id`」と入力します。 

1.  **[保存]** を選択します。


# 演習 2:データをインポートする

**目的:** この演習では、サンプル データを Dataverse データベースにインポートします。

## タスク \#1: Excel ファイルを OneDrive に読み込む

1.  **Visits.xlsx** ファイルが **C:/LabFiles** で仮想マシンに格納されている必要があります。 [Visits.xlsx](https://github.com/MicrosoftLearning/PL-900-Microsoft-Power-Platform-Fundamentals/raw/master/Allfiles/Visits.xlsx) をまだダウンロードしていない場合は、ダウンロードします。

2.  `https://make.powerapps.com` にまだサインインしていない場合は、サインインします。

3.  まだ選んでいない場合は、右上隅の **Dev One** 環境を選びます。

4.  左上隅にあるアプリ起動ツール (ワッフル ボタン) を選んでアプリケーションを変更し、**[OneDrive]** を選びます。 (OneDrive が設定されるまでに、少し時間がかかる場合があります。 **[OneDrive の準備ができました]** と画面に表示されたら、それを選択します。)

5.  メニューから **[+ 新規追加]** を選択し、 **[ファイルのアップロード]** を選択します。

6.  **Visits.xlsx** ファイルを見つけて選び、 **[開く]** を選択します。

    > **注:** このファイルは、仮想マシン上の **Desktop** > **All Files** フォルダー内にあります。


## タスク \#2: データフローを作成する

1.  まだサインインしていない場合は、`https://make.powerapps.com` にサインインします

2.  右上の **[環境]** メニューで、**Dev One** 環境が選択されていることを確認します。 

3.  左側のナビゲーションを使って、**[テーブル]** を選択します。 

4.  前の演習で作成した **[訪問]** テーブルを開きます。 

5.  上部のメニューを使用して、 **[インポート]**  >  **[データのインポート]** を選択します。

6.  **[データ ソースの選択]** ダイアログで、 **[Excel ブック]** を選びます。

7.  **[ファイルにリンク]** オプションを選びます。 **[OneDrive の参照]** を選択します。 求められたら、自分の Microsoft 365 資格情報でサインインします。 常にポップアップを許可するようにブラウザーを構成します。 

8.  前のタスクで OneDrive にアップロードされた **Visits.xlsx** ファイルを選択します。 

9.  [**次へ**] を選択します。 

10. **[Power Query]**  >  **[データを選択する]** 画面で、 **[訪問]** Excel ブックを選択します。 

11. [**次へ**] を選択します。 このページから移動しないでください。

12. **[次へ]** を選択します。 

13. **[マップ テーブル]** セクションで、 **[読み込みの設定]** の下にある **[既存のテーブルに読み込む]** を選びます。 

14. **[宛先テーブル]** ドロップダウン メニューで、テーブル **crXXX_visit** を選びます (XXX はランダムな文字と数字のセット)

15. **[列マッピング]** セクションで、列を対応する変換先列にマップします。

    | [対象になる列]  | ソースの値   |
    |:---------------------|:----------------|
    | crxxx_ActualEnd      | actual end      |
    | crxxx_ActualStart    | actual start    |
    | crxxx_Code           | code            |
    | crxxx_Name           | name            |
    | crxxx_ScheduledEnd   | scheduled end   |
    | crxxx_ScheduledStart | scheduled start |

16. **[次へ]** を選択します。 

17. **[手動で更新]** を選びます。 

18. **[発行]** を選択します。 

    > **注:**  データがテーブルにインポートされるまで数分かかる場合があります。 複数のエラーが発生しても心配はなく、コースの残りの部分にも影響しません。


## タスク \#3: データのインポートを確認する

1.  データがインポートされたら、画面の左側にあるナビゲーションを使用して、 **[テーブル]** を選択して **[訪問]** テーブルを開きます。

2.  インポートしたデータが **[[訪問] 列とデータ]** セクションに表示されていることを確認します。

これで、正常に新しいテーブルが作成され、データがインポートされました。


