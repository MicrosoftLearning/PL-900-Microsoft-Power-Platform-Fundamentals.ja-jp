---
lab:
  title: 'ラボ 1:データ モデリング'
  module: 'Module 2: Introduction to Microsoft Dataverse'
---

# ラボ 1:データ モデリング

## シナリオ

ベローズ カレッジは、キャンパス内に複数の建物を持つ教育機関です。 キャンパス訪問は現在、紙の記録簿に記録されています。 その情報は一貫して把握されておらず、キャンパス全体の訪問に関するデータを収集して分析する手段もありません。

キャンパスの管理者は、建物へのアクセスがセキュリティ担当者によって管理され、すべての訪問者がホストによって事前に登録され、記録されることが要求される訪問者登録システムを近代化したいと考えています。

このコース全体を通して、アプリケーションを構築するとともに自動化を行って、ベローズ カレッジの管理担当者とセキュリティ担当者がキャンパス内の建物へのアクセスを管理および制御できるようにします。

このラボでは、環境にアクセスし、Microsoft Dataverse データベースを作成します。 また、次の要件をサポートするデータ モデルも作成します。

- R1 - スケジュールされたキャンパス訪問の情報を追跡します

- R2 – 訪問者を識別し、追跡するための基本情報を記録します

- R3 – 訪問をスケジュール、記録、および管理します

最後に、サンプル データを Microsoft Dataverse にインポートします。


## ラボ手順の概要

学習環境を準備するには、次の手順を実行します。

- メタデータの説明 (テーブルおよびリレーションシップ) については、[データ モデルのドキュメント](https://github.com/MicrosoftLearning/PL-900-Microsoft-Power-Platform-Fundamentals/blob/master/Allfiles/Campus%20Management.png)を参照してください。 Ctrl キーを押しながらクリックするか、リンクを右クリックして、データ モデル ドキュメントを新しいウィンドウで開くことができます。
- 訪問テーブルを作成します
- Excel スプレッドシートを使用して訪問データをインポートする

## 前提条件

- **モジュール 0 ラボ 0 - ラボ環境の検証**の完了

## 始める前に考慮すべきこと

- 名前付け規則 - 名前は、十分注意して入力してください。


## 演習 1:新しいテーブルを作成する

**目的:** このテーブルでは、新しいカスタム テーブル "訪問" を作成します。


### タスク \#1:訪問テーブルと列を作成する

**訪問**テーブルには、訪問者、スケジュールされた時間、各訪問の実際の時間などのキャンパス訪問に関する情報が含まれます。

訪問チェックイン プロセス中に尋ねられたときに、訪問者が簡単に入力して解釈できる一意の番号を毎回ごとの訪問に割り当てたいと思います。

> 訪問の時刻は常に建物の場所に対してローカルであり、異なるタイム ゾーンから表示しても変更してはならないため、 **[タイム ゾーン非依存]** 動作を使用して、日付と時刻の情報を記録します。

1. [https://make.powerapps.com](https://make.powerapps.com/) にサインインします (まだサインインしていない場合)

1. **[[自分のイニシャル] 練習]** 環境がまだ選択されていない場合は、右上で選択します。

1. 左側のナビゲーションを使用して **[Dataverse]** を展開し、 **[テーブル]** を選択します。

1. **[+ 新しいテーブル]** をクリックします。

1. **[表示名]** に「**訪問**」と入力します。

1. **[保存]** をクリックします。

1. **[スキーマ]** セクションで、 **[列]** を選択します。

1. [開始予定] 列を作成します

    - **[+ 新しい列]** を選択します。

    - **[表示名]** に「**開始予定**」と入力します。

    - **[データの種類]** で **[日付と時刻]** を選択します。

    - **必須**フィールドで、 **[必須のビジネス]** を選択します。

    - **[詳細オプション]** を展開します。

    - **[タイム ゾーンの調整]** で、 **[タイム ゾーン非依存]** を選択します。

    - **[保存]** をクリックします。

1. [終了予定] 列を作成します

    - **[+ 新しい列]** をクリックします。

    - **[表示名]** に「**終了予定**」と入力します。

    - **[データの種類]** で **[日付と時刻]** を選択します。

    - **必須**フィールドで、 **[必須のビジネス]** を選択します。

    - **[詳細オプション]** を展開します。

    - **[タイム ゾーンの調整]** で、 **[タイム ゾーン非依存]** を選択します。

    - **[保存]** をクリックします。

1. [実際の開始] 列を作成します

    - **[+ 新しい列]** をクリックします。

    - **[表示名]** に「**実際の開始**」と入力します。

    - **[データの種類]** で **[日付と時刻]** を選択します。

    - **必須**フィールドで、これを **[任意]** のままにします。

    - **[詳細オプション]** を展開します。

    - **[タイム ゾーンの調整]** で、 **[タイム ゾーン非依存]** を選択します。

    - **[保存]** をクリックします。

1. [実際の終了] 列を作成します

    - **[+ 新しい列]** をクリックします。

    - **[表示名]** に「**実際の終了**」と入力します。

    - **[データの種類]** で **[日付と時刻]** を選択します。

    - **必須**フィールドで、これを **[任意]** のままにします。

    - **[詳細オプション]** を展開します。

    - **[タイム ゾーンの調整]** で、 **[タイム ゾーン非依存]** を選択します。

    - **[保存]** をクリックします。

1. [コード] 列を作成します

    - **[+ 新しい列]** をクリックします。

    - **[表示名]** に「**コード**」と入力します。

    - **[データの種類]** で **[オートナンバー]** を選択します。

    - **[オートナンバー型]** に **[日付が先頭に付加される数]** を選択します。

    - **[保存]** をクリックします。

1. 訪問者の検索列を作成します

    - **[+ 新しい列]** をクリックします。

    - **[表示名]** に「**訪問者**」と入力します。

    - **[データの種類]** で **[検索]** を選択します。

    - **[関連テーブル]** で **[連絡先]** を選択します。

    - **[詳細オプション]** を展開します。

    - **[リレーションシップ名]** に「**visitor_id**」と入力します。

    - **[保存]** をクリックします。

## 演習 2:データをインポートする

**目的:** この演習では、サンプル データを Dataverse データベースにインポートします。

### タスク \#1.1: Excel ファイルを OneDrive に読み込む

1. **Visits.xlsx** ファイルが **C:/LabFiles** で仮想マシンに格納されている必要があります。 [Visits.xlsx](https://github.com/MicrosoftLearning/PL-900-Microsoft-Power-Platform-Fundamentals/raw/master/Allfiles/Visits.xlsx) をまだダウンロードしていない場合は、ダウンロードします。

2. [https://make.powerapps.com](https://make.powerapps.com/) にまだサインインしていない場合は、サインインします。

3. **[[自分のイニシャル] 練習]** 環境がまだ選択されていない場合は、右上で選択します。

4. 左上隅にある [ワッフル] ボタンをクリックしてアプリケーションを変更し、 **[OneDrive]** を選びます。 (OneDrive が設定されるまでに、少し時間がかかる場合があります。 **[OneDrive の準備ができました]** と画面に表示されたら、それをクリックします。)

5. 上部のメニューの **[アップロード]** をクリックして、 **[ファイル]** を選びます。

6. **Visits.xlsx** ファイルを見つけて選び、 **[開く]** をクリックします。

 **注:** このファイルは、コンピューターの **[すべてのファイル]** フォルダーにあります。
 
### タスク \#1.2: データフローを作成する

1. [https://make.powerapps.com](https://make.powerapps.com/) にまだサインインしていない場合は、サインインします。

2. **[[自分のイニシャル] 練習]** 環境がまだ選択されていない場合は、右上で選択します。

3. 左側のナビゲーションを使用して **[Dataverse]** を展開し、 **[テーブル]** を選択します。

4. 前の演習で作成した**訪問**テーブルを見つけて開きます。

5. 上部のメニューを使って、 **[インポート]** の横にあるドロップダウン矢印を選び、 **[データのインポート]** を選びます。

6. **[データ ソースの選択]** ダイアログで、 **[Excel ブック]** を選びます。

7. **[ファイルにリンク]** オプションを選びます。 **[OneDrive の参照]** をクリックします。 求められたら、自分の Microsoft 365 資格情報でサインインします。

8. OneDrive にアップロードされた **Visits.xlsx** ファイルを選んで、 **[選択]** をクリックします。

9. **[次へ]** をクリックします。

10. **[データの選択]** で、**Visits** Excel ブックの横にあるボックスをオンにします。

11. **[次へ]** をクリックします。 このページから移動しないでください。

12. **[次へ]** をクリックします。

13. **[マップ テーブル]** セクションで、 **[読み込みの設定]** の下にある **[既存のテーブルに読み込む]** を選びます。

14. **[宛先テーブル]** ドロップダウン メニューで、**crXXX_visit** で始まるテーブル名を選びます (XXX はランダムな文字と数字のセット)

15. **[列マッピング]** で。 列を対応する宛先列にマップします。

| [対象になる列]  | ソースの値   |
|:---------------------|:----------------|
| crxxx_ActualEnd      | actual end      |
| crxxx_ActualStart    | actual start    |
| crxxx_Code           | code            |
| crxxx_Name           | name            |
| crxxx_ScheduledEnd   | scheduled end   |
| crxxx_ScheduledStart | scheduled start |

16. **[次へ]** をクリックします。

17. **[手動で更新]** を選びます。

18. **[発行]** をクリックします。

**注:**  データがテーブルにインポートされるまで数分かかる場合があります。 複数のエラーが発生しても心配はなく、コースの残りの部分にも影響しません。

### タスク \#3: データのインポートを確認する

1. データがインポートされたら、画面の左側にあるナビゲーションを使用して、 **[訪問]** テーブルを再度選択します。

2. インポートしたデータが **[[訪問] 列とデータ]** セクションに表示されていることを確認します。

これで、正常に新しいテーブルが作成され、データがインポートされました。
